{"version":3,"sources":["redux/createStore.js","redux/applyMiddleware.js","examples/redux/store.js","redux/combineReducers.js","examples/redux/index.js","examples/react-redux/store.js","react-redux/context.js","react-redux/connect.js","react-redux/Provider.js","examples/react-redux/index.js","react-router-dom/context.js","react-router-dom/Router.js","react-router-dom/BrowserRouter.js","react-router-dom/Switch.js","react-router-dom/HashRouter.js","react-router-dom/Route.js","react-router-dom/Redirect.js","react-router-dom/Link.js","examples/react-router-dom/index.js","react-router-dom/withRouter.js","App.js","index.js"],"names":["createStore","reducer","enhancer","dispatch","action","currentState","n","listeners","length","handleStoreChange","getState","dispatchWithMiddleware","type","subscribe","push","index","indexOf","splice","applyMiddleware","middlewares","next","compose","map","middleware","reducers","reducerKeys","Object","keys","finalReducers","key","finalReducerKeys","state","hasChange","nextState","i","prevStateForKey","nextStateForKey","combineReducers","counter","text","store","thunk","logger","Counter","handleAdd","props","add","handleReduce","reduce","handleTextChange","changeText","Fragment","this","onClick","Component","ConnectedComponent","connect","SimpleRedux","initialState","dispatchAdd","dispatchReduce","dispatchTextChange","StoreContext","React","createContext","mapStateToProps","mapDispatchToProps","WrappedComponent","context","storeState","unSubscribe","bind","nextProps","shallowEqual","clearCache","prevStoreState","setState","contextType","Provider","value","children","Text","textChange","ConnectedText","ConnectedCounter","SimpleReactRedux","RouterContext","Router","location","history","_isMounted","uninstall","listen","match","path","url","params","isExact","pathname","BrowserRouter","createBrowserHistory","Switch","Consumer","element","Children","forEach","child","from","cloneElement","Route","Redirect","method","replace","to","prevProps","Link","handleClick","event","preventDefault","otherProps","href","WithedComponent","WrapComponent","hoistStatics","withRouter","SimpleReactRouterDom","App","component","ReactDOM","render","basename","document","getElementById"],"mappings":"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","file":"static/js/main.caf1d761.chunk.js","sourcesContent":["function createStore(reducer, enhancer) {\n  let dispatch = function(action) {\n    currentState = reducer(currentState, action);\n\n    for (let n = 0; n < listeners.length; n++) {\n      const handleStoreChange = listeners[n];\n\n      handleStoreChange();\n    }\n\n    return action;\n  };\n  const subscribe = function(handleStoreChange) {\n    listeners.push(handleStoreChange);\n\n    return function unsubscribe() {\n      const index = listeners.indexOf(handleStoreChange);\n\n      listeners.splice(index, 1);\n    };\n  };\n  const getState = function() {\n    return currentState;\n  };\n\n  let currentState = {};\n  let listeners = [];\n  let dispatchWithMiddleware = dispatch;\n\n  dispatch({ type: \"INIT\" }); // 初始化\n  if (typeof enhancer === \"function\") {\n    dispatchWithMiddleware = enhancer({\n      dispatch: action => dispatchWithMiddleware(action),\n      getState\n    })(dispatch);\n  }\n\n  return {\n    dispatch: dispatchWithMiddleware,\n    subscribe,\n    getState\n  };\n}\n\nexport default createStore;\n","import { compose } from \"redux\";\n\nfunction applyMiddleware(...middlewares) {\n  return function({ getState, dispatch }) {\n    return function(next) {\n      return compose(\n        ...middlewares.map(middleware => {\n          return middleware({ getState, dispatch });\n        })\n      )(next);\n    };\n  };\n}\n\nexport default applyMiddleware;\n","import { combineReducers } from \"../../redux\";\n\nexport function dispatchAdd() {\n  return function(dispatch, getState) {\n    return dispatch({\n      type: \"DISPATCH_ADD\"\n    });\n  };\n}\n\nexport function dispatchReduce() {\n  return {\n    type: \"DISPATCH_REDUCE\"\n  };\n}\n\nexport function dispatchChangeText() {\n  return {\n    type: \"DISPATCH_CHANGE_TEXT\"\n  };\n}\n\nexport function counterReducer(state = 0, action) {\n  switch (action.type) {\n    case \"DISPATCH_ADD\":\n      return state + 1;\n    case \"DISPATCH_REDUCE\":\n      return state - 1;\n    default:\n      return state;\n  }\n}\n\nexport function textReducer(state = \"world\", action) {\n  switch (action.type) {\n    case \"DISPATCH_CHANGE_TEXT\":\n      return state === \"world\" ? \"redux\" : \"world\";\n    default:\n      return state;\n  }\n}\n\nconst reducer = combineReducers({\n  counter: counterReducer,\n  text: textReducer\n});\n\nexport default reducer;\n","// combineReducer({\n//   a: aReducer,\n//   b: bReducer,\n//   c: cReducer\n// })\n// >>>\n// (state, action) => {\n//   a: aReducer(state.a, action),\n//   b: bReducer(state.b, action),\n//   c: cReducer(state.c, action)\n// }\n\nexport default function combineReducers(reducers) {\n  const reducerKeys = Object.keys(reducers);\n  const finalReducers = {};\n\n  for (let n = 0; n < reducerKeys.length; n++) {\n    const key = reducerKeys[n];\n\n    if (typeof reducers[key] === \"function\") {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  const finalReducerKeys = Object.keys(finalReducers);\n\n  return function(state = {}, action) {\n    let hasChange = false;\n    const nextState = {};\n    for (let i = 0; i < finalReducerKeys.length; i++) {\n      const key = finalReducerKeys[i];\n      const reducer = finalReducers[key];\n      const prevStateForKey = state[key];\n      const nextStateForKey = reducer(prevStateForKey, action);\n\n      nextState[key] = nextStateForKey;\n      hasChange = hasChange || nextStateForKey !== prevStateForKey;\n    }\n    return hasChange ? nextState : state;\n  };\n}\n","import React, { Component } from \"react\";\nimport { dispatchAdd, dispatchReduce, dispatchChangeText } from \"./store\";\nimport { createStore, applyMiddleware } from \"../../redux\";\nimport { Provider } from \"react-redux\";\nimport { connect } from \"react-redux\";\nimport logger from \"redux-logger\";\nimport thunk from \"redux-thunk\";\nimport reducer from \"./store\";\n\nconst middlewares = applyMiddleware(thunk, logger);\nconst store = createStore(reducer, middlewares);\n\nclass Counter extends Component {\n  handleAdd = () => {\n    this.props.add();\n  };\n  handleReduce = () => {\n    this.props.reduce();\n  };\n  handleTextChange = () => {\n    this.props.changeText();\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <h1>redux-demo</h1>\n        <p>hello {this.props.text}</p>\n        <button onClick={this.handleTextChange}>change Text</button>\n        <p>click {this.props.counter}</p>\n        <button onClick={this.handleAdd}>add</button>\n        <button onClick={this.handleReduce}>reduce</button>\n      </React.Fragment>\n    );\n  }\n}\n\nconst ConnectedComponent = connect(\n  state => {\n    return {\n      counter: state.counter,\n      text: state.text\n    };\n  },\n  {\n    add: dispatchAdd,\n    reduce: dispatchReduce,\n    changeText: dispatchChangeText\n  }\n)(Counter);\n\nexport default class SimpleRedux extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <ConnectedComponent />\n      </Provider>\n    );\n  }\n}\n","const initialState = {\n  counter: 0,\n  text: \"world\"\n};\n\nexport const dispatchAdd = {\n  type: \"DISPATCH_ADD\"\n};\n\nexport const dispatchReduce = {\n  type: \"DISPATCH_REDUCE\"\n};\n\nexport const dispatchTextChange = {\n  type: \"DISPATCH_TEXT_CHANGE\"\n};\n\nexport function reducers(state = initialState, action) {\n  switch (action.type) {\n    case \"DISPATCH_ADD\": {\n      return {\n        ...state,\n        counter: state.counter + 1\n      };\n    }\n    case \"DISPATCH_REDUCE\": {\n      return {\n        ...state,\n        counter: state.counter - 1\n      };\n    }\n    case \"DISPATCH_TEXT_CHANGE\": {\n      return {\n        ...state,\n        text: state.text === \"world\" ? \"react-redux\" : \"world\"\n      };\n    }\n    default:\n      return state;\n  }\n}\n","import React from \"react\";\n\nconst StoreContext = React.createContext({});\n\nexport default StoreContext;\n","import React, { Component } from \"react\";\nimport { shallowEqual } from \"@babel/types\";\nimport StoreContext from \"./context\";\n\nexport default function connect(mapStateToProps, mapDispatchToProps) {\n  return function wrapWithCopmonent(WrappedComponent) {\n    return class Connect extends Component {\n      static contextType = StoreContext;\n\n      constructor(props, context) {\n        super(props, context);\n\n        this.store = props.store || context;\n        this.state = {\n          storeState: this.store.getState()\n        };\n      }\n\n      componentDidMount() {\n        if (!this.unSubscribe) {\n          this.unSubscribe = this.store.subscribe(\n            this.handleStoreChange.bind(this)\n          );\n        }\n      }\n\n      shouldComponentUpdate(nextProps, nextState) {\n        return !(\n          shallowEqual(this.state.storeState, nextState.storeState) ||\n          shallowEqual(\n            mapStateToProps(this.state.storeState, this.props),\n            mapStateToProps(nextState.storeState, nextProps)\n          )\n        );\n      }\n\n      componentWillUnmount() {\n        if (this.unSubscribe) {\n          this.unSubscribe();\n        }\n        this.clearCache();\n      }\n\n      handleStoreChange() {\n        if (!this.unSubscribe) {\n          return;\n        }\n\n        const prevStoreState = this.state.storeState;\n        const storeState = this.store.getState();\n\n        if (prevStoreState !== storeState) {\n          this.setState({ storeState });\n        }\n      }\n\n      clearCache() {\n        this.store = null;\n        this.unSubscribe = null;\n      }\n\n      render() {\n        const storeState = this.state.storeState;\n\n        return (\n          <WrappedComponent\n            {...this.props}\n            {...mapStateToProps(storeState, this.props)}\n            {...mapDispatchToProps(this.store.dispatch, this.props)}\n          />\n        );\n      }\n    };\n  };\n}\n","import React, { Component } from \"react\";\nimport StoreContext from \"./context\";\nimport PropTypes from \"prop-types\";\n\nexport default class Provider extends Component {\n  render() {\n    return (\n      <StoreContext.Provider value={this.props.store}>\n        {this.props.children}\n      </StoreContext.Provider>\n    );\n  }\n}\n\nProvider.propTypes = {\n  children: PropTypes.element.isRequired,\n  store: PropTypes.shape({\n    subscribe: PropTypes.func.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    getState: PropTypes.func.isRequired\n  })\n};\n","import React, { Component } from \"react\";\nimport { dispatchAdd, dispatchReduce, dispatchTextChange } from \"./store\";\nimport { Provider, connect } from \"../../react-redux\";\nimport { createStore } from \"redux\";\nimport { reducers } from \"./store\";\n\nconst store = createStore(reducers);\n\nclass Text extends Component {\n  handleTextChange = () => {\n    this.props.textChange();\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <p>hello {this.props.text}</p>\n        <button onClick={this.handleTextChange}>change!</button>\n      </React.Fragment>\n    );\n  }\n}\n\nconst ConnectedText = connect(\n  state => {\n    return {\n      text: state.text\n    };\n  },\n  dispatch => {\n    return {\n      textChange: () => {\n        dispatch(dispatchTextChange);\n      }\n    };\n  }\n)(Text);\n\nclass Counter extends Component {\n  handleAdd = () => {\n    this.props.add();\n  };\n  handleReduce = () => {\n    this.props.reduce();\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <p>click {this.props.counter}</p>\n        <button onClick={this.handleAdd}>add</button>\n        <button onClick={this.handleReduce}>reduce</button>\n      </React.Fragment>\n    );\n  }\n}\n\nconst ConnectedCounter = connect(\n  state => {\n    return {\n      counter: state.counter\n    };\n  },\n  dispatch => {\n    return {\n      add: function() {\n        dispatch(dispatchAdd);\n      },\n      reduce: function() {\n        dispatch(dispatchReduce);\n      }\n    };\n  }\n)(Counter);\n\nexport default class SimpleReactRedux extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <div>\n          <h1>react_redux-demo</h1>\n          <ConnectedText />\n          <ConnectedCounter />\n        </div>\n      </Provider>\n    );\n  }\n}\n","import React from \"react\";\n\nconst RouterContext = React.createContext({});\n\nexport default RouterContext;\n","import React, { Component } from \"react\";\nimport RouterContext from \"./context\";\n\nexport default class Router extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      location: props.history.location\n    };\n    this._isMounted = false;\n\n    this.uninstall = props.history.listen(({ location }) => {\n      if (this._isMounted) {\n        this.setState({\n          location\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n  componentWillUnmount() {\n    this.uninstall();\n    this._isMounted = false;\n  }\n\n  render() {\n    const { location } = this.state;\n    const { history, children } = this.props;\n\n    return (\n      <RouterContext.Provider\n        value={{\n          location,\n          history,\n          match: {\n            path: \"/\",\n            url: \"/\",\n            params: {},\n            isExact: location.pathname === \"/\"\n          }\n        }}\n      >\n        {children}\n      </RouterContext.Provider>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { createBrowserHistory } from \"history\";\nimport Router from \"./Router\";\n\nexport default class BrowserRouter extends Component {\n  history = createBrowserHistory(this.props);\n\n  render() {\n    return <Router history={this.history} children={this.props.children} />;\n  }\n}\n","import React, { Component, cloneElement } from \"react\";\nimport RouterContext from \"./context\";\n\nexport default class Switch extends Component {\n  render() {\n    return (\n      <RouterContext.Consumer>\n        {context => {\n          const location = this.props.location || context.location;\n\n          let match, element;\n          React.Children.forEach(this.props.children, child => {\n            if (!match) {\n              element = child;\n\n              const path = child.props.path || child.props.from;\n\n              match = path ? location.pathname === path : context.match;\n            }\n          });\n\n          if (element && match) {\n            return cloneElement(element, { location });\n          }\n          return null;\n        }}\n      </RouterContext.Consumer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { createHashHistory } from \"history\";\nimport Router from \"./Router\";\n\nexport default class HashRouter extends Component {\n  history = createHashHistory(this.props);\n\n  render() {\n    return <Router history={this.history} children={this.props.children} />;\n  }\n}\n","import React, { Component } from \"react\";\nimport RouterContext from \"./context\";\n\nexport default class Route extends Component {\n  render() {\n    return (\n      <RouterContext.Consumer>\n        {context => {\n          const { match, path, children } = this.props;\n          const { location } = context;\n\n          const isMatch = match\n            ? match\n            : path\n            ? location.pathname === path\n            : context.match;\n\n          if (isMatch) {\n            return children;\n          } else {\n            return null;\n          }\n        }}\n      </RouterContext.Consumer>\n    );\n  }\n}\n","import { Component } from \"react\";\nimport RouterContext from \"./context\";\n\nexport default class Redirect extends Component {\n  static contextType = RouterContext;\n\n  constructor(props, context) {\n    super(props, context);\n\n    const { push = false } = props;\n    const { history } = context;\n\n    this.method = push ? history.push : history.replace;\n  }\n\n  componentDidMount() {\n    this.method(this.props.to);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.to !== this.props.to) {\n      this.method(this.props.to);\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n","import React, { Component } from \"react\";\nimport RouterContext from \"./context\";\n\nexport default class Link extends Component {\n  handleClick = method => {\n    return event => {\n      event.preventDefault();\n\n      method(this.props.to);\n    };\n  };\n\n  render() {\n    const { to, replace, children, ...otherProps } = this.props;\n\n    return (\n      <RouterContext.Consumer>\n        {context => {\n          const { history } = context;\n          const method = replace ? history.replace : history.push;\n\n          return (\n            <a {...otherProps} href={to} onClick={this.handleClick(method)}>\n              {children}\n            </a>\n          );\n        }}\n      </RouterContext.Consumer>\n    );\n  }\n}\n","import React, { Component, Fragment } from \"react\";\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n  withRouter,\n  Link,\n  Redirect\n} from \"../../react-router-dom\";\n\nclass PTF extends Component {\n  handleClick = text => {\n    return () => {\n      this.props.history.push(text);\n    };\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <h1>react_router_dom-demo</h1>\n        <Switch>\n          <Route path=\"/react-router-dom/\">\n            <div>Main</div>\n          </Route>\n          <Route path=\"/react-router-dom/page\">\n            <div>Page</div>\n          </Route>\n          <Route path=\"/react-router-dom/title\">\n            <div>Title</div>\n          </Route>\n          <Route path=\"/react-router-dom/footer\">\n            <div>Footer</div>\n          </Route>\n          <Redirect path=\"/redirect\" to=\"/404\" />\n        </Switch>\n        <p>Link Component jump：</p>\n        <Link to={\"/react-router-dom/\"}>main</Link>\n        <span>　</span>\n        <Link to={\"/react-router-dom/page\"}>page</Link>\n        <span>　</span>\n        <Link to={\"/react-router-dom/title\"}>title</Link>\n        <span>　</span>\n        <Link to={\"/react-router-dom/footer\"}>footer</Link>\n        <p>withRouter pass history props jump：</p>\n        <button onClick={this.handleClick(\"/react-router-dom/\")}>main</button>\n        <button onClick={this.handleClick(\"/react-router-dom/page\")}>\n          page\n        </button>\n        <button onClick={this.handleClick(\"/react-router-dom/title\")}>\n          title\n        </button>\n        <button onClick={this.handleClick(\"/react-router-dom/footer\")}>\n          footer\n        </button>\n      </Fragment>\n    );\n  }\n}\n\nconst WithedComponent = withRouter(PTF);\n\nclass SimpleReactRouterDom extends Component {\n  handleClick = text => {\n    return () => {\n      this.props.history.push(text);\n    };\n  };\n\n  render() {\n    return (\n      <BrowserRouter>\n        <WithedComponent />\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default SimpleReactRouterDom;\n","import React, { Component } from \"react\";\nimport hoistStatics from \"hoist-non-react-statics\";\nimport RouterContext from \"./context\";\n\nexport default function withRouter(WrapComponent) {\n  class WrappedComponent extends Component {\n    render() {\n      return (\n        <RouterContext.Consumer>\n          {context => {\n            return <WrapComponent {...this.props} {...context} />;\n          }}\n        </RouterContext.Consumer>\n      );\n    }\n  }\n\n  return hoistStatics(WrappedComponent, WrapComponent);\n}\n","import React, { Fragment } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport SimpleRedux from \"./examples/redux\";\nimport SimpleReactRedux from \"./examples/react-redux\";\nimport SimpleReactRouterDom from \"./examples/react-router-dom\";\n\nfunction App() {\n  return (\n    <Fragment>\n      <Link to=\"/redux\">redux-demo</Link>\n      <span>　　　</span>\n      <Link to=\"/react-redux\">react_redux-demo</Link>\n      <span>　　　</span>\n      <Link to=\"/react-router-dom\">react_router_dom-demo</Link>\n      <div>\n        <Switch>\n          <Route path=\"/redux\" component={SimpleRedux} />\n          <Route path=\"/react-redux\" component={SimpleReactRedux} />\n          <Route path=\"/react-router-dom\" component={SimpleReactRouterDom} />\n        </Switch>\n      </div>\n    </Fragment>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter basename=\"/react-demo\">\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}